---
- host: dev
  become: yes
  remote_user: ec2-user
  tasks:
    - name:  Install Apache.
      yum: name={{ item }} state=present
      with_items:
      - httpd
      - php
      - php-mysql
    - name: Downlad WordPress
      get_url: url=http://wordpress.org/wordpress-latest.tar.gz dest=/var/www/html/wordpress.tar.gz force=yes
    - name: Extract Workpress
      command: "tar xzf /var/www/html/wordpress.tar.gz -C /var/www/html --strip-components 1"
    - name: Make my directory tree readable
      file:
          path: /var/www/html
          mode: u=rwx,g=rX,o=rX
          recurese: yes
          owner: apache
          group: apache
      - name: Make Sure Apache is started no and at boot.
        service: name=httpd state=started enabled=yes